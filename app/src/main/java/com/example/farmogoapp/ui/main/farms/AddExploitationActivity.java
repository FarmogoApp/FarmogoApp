package com.example.farmogoapp.ui.main.farms;

import android.content.Intent;
import android.os.Bundle;
import android.text.InputType;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

import com.example.farmogoapp.R;

public class AddExploitationActivity extends AppCompatActivity {

    private Spinner spinner;
    private LinearLayout ll;
    private Button btnAddExplotation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.exploitation_add);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        spinner = findViewById(R.id.spinner);
        btnAddExplotation = findViewById(R.id.btnAdd);

        Integer[] items = new Integer[]{1, 2, 3, 4};
        ArrayAdapter<Integer> adapter = new ArrayAdapter<Integer>(this, android.R.layout.simple_spinner_item, items);
        spinner.setAdapter(adapter);
        registerListeners();
    }

    @Override
    public boolean onSupportNavigateUp() {
        this.finish();
        return super.onSupportNavigateUp();
    }


    private void registerListeners() {

        btnAddExplotation.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast toast1 = Toast.makeText(getApplicationContext(), getString(R.string.farm_added_succesfull), Toast.LENGTH_SHORT);
                toast1.show();
                Intent intent = new Intent(AddExploitationActivity.this, FarmStatsActivity.class);
                startActivity(intent);
            }
        });

        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                LinearLayout ll = findViewById(R.id.linearLayout2);
                ll.removeAllViews();

                int item = parent.getSelectedItemPosition();
                //Toast.makeText(getBaseContext(), parent.getItemAtPosition(position).toString() , Toast.LENGTH_LONG).show();

                for (int i = 1; i <= item + 1; i++) {

                    TextView tv = new TextView(AddExploitationActivity.this);
                    EditText et = new EditText(AddExploitationActivity.this);


                    tv.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));
                    et.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));
                    LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) tv.getLayoutParams();
                    LinearLayout.LayoutParams le = (LinearLayout.LayoutParams) et.getLayoutParams();


                    lp.setMargins(70, 25, 25, 0);
                    et.setInputType(InputType.TYPE_CLASS_NUMBER);

                    tv.setText(getString(R.string.num_partitions_building) + " " + i);
                    tv.setId(i + 10);
                    et.setId(i + 10);

                    ll.addView(tv, lp);
                    ll.addView(et, le);

                }

            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {

            }

        });

    }
}
